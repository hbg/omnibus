{% macro results_count(data) -%}
  {#
   # Indicate the number of displayed and total number of results for a
   # given search.
   #}
  {% if data["total_results"]|int > 0 %}
    <p class="mb-3">Displaying {{ data["results"]["work"]|length }} of {{ data["total_results"] }} results for "{{ data["query"] }}"</p>
  {% else %}
    <p>Displaying 0 results for "{{ data["query"] }}"</p>
  {% endif %}
{%- endmacro %}

{% macro result_item(work, read) -%}
  {#
   # Display a single search result, showing its cover thumbnail, title, author,
   # and rating. Additionally have a link to mark a result as read.
   #}
  <div class="border border-gray-400 bg-white flex justify-between mb-3 px-6 py-3 rounded">
    <figure class="mr-6">
      <img src="{{ work['best_book']['image_url'] }}" />
    </figure>
    <div class="flex flex-col justify-center flex-1 pr-6">
      <p class="flex items-center text-lg uppercase">
        {{ work["best_book"]["title"] }}
        {% if work["original_publication_year"] %}
          <span class="ml-2 text-gray-700 text-sm">({{ work["original_publication_year"] }})</span>
        {% endif %}
      </p>
      <p>{{ work["best_book"]["author"]["name"] }}</p>
      <p class="flex items-center mt-2">
        <span>{{ work["average_rating"] }}</span>
        <span class="ml-2 text-gray-700 text-sm">({{ work["ratings_count"] }})</span>
      </p>
    </div>
    <div class="flex items-center ml-6">
      {% if work["best_book"]["id"] in read %}
        <span data-book-id="{{ work['best_book']['id'] }}" class="mark-as-unread cursor-pointer text-gray-700 text-sm hover:underline uppercase">Read</span>
      {% else %}
        <span data-book-id="{{ work['best_book']['id'] }}" class="mark-as-read cursor-pointer text-gray-700 text-sm hover:underline uppercase">Mark as read</span>
      {% endif %}
    </div>
  </div>
{%- endmacro %}
